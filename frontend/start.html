<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="format-detection" content="telephone=no">
    <meta name="turbolinks-visit-control" content="reload">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="main.css" type="text/css">

    <title>MBTI: 나와 같은 유형의 친구들</title>

    <style type="text/css">
        @font-face {
            font-family: 'NEXON Lv1 Gothic OTF Bold';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-04@2.1/NEXON Lv1 Gothic OTF Bold.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'GmarketSansMedium';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff') format('woff');
            font-weight: normal;
            font-style: normal;
        }
        .next {
            margin-bottom: 20px;
           
            background-color: #5e3287;
            color: #ffffff;
            padding: 6px 10px;
            font-size: 2.4em;
            cursor: pointer;
            width: 70%;
        }

        .my-input-text {
            background-color: #c5cf7c;
            border: 0px;
            color: #3C4424;
           
        }

        .my-input {
            border: 5px solid #c5cf7c;
            border-radius: 10px;
        }

        canvas {
            margin: 20px 0 0 20px;
            border: 1px solid #cccccc;
        }

        .image-container {
            width: 200px;
            height: 100px;
            overflow: scroll;
        }
        ::-webkit-scrollbar {
            -webkit-appearance: none;
            background-color: #e8e8e8;
            width: 14px;
        }

        ::-webkit-scrollbar-thumb {
            border-radius: 4px;
            background-color: rgba(0,0,0,.5);
            -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5);
        }

    </style>
</head>
<body>
    <div class='template' style="margin-top: 50px;" >


        <div class="container" style="font-family: 'GmarketSansMedium'; center-block">
            <div class="row justify-content-center">

                <div class="input-group input-group-lg my-input" style="margin-top:3rem; width:70%; align-content:center;">
                    <div class="input-group-prepend">
                        <span class="input-group-text my-input-text" id="classCode"><object name="classCode">우리반 코드는?</object></span>
                    </div>
                    <input type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                </div>


                <div class="input-group input-group-lg my-input" style="margin-top:5rem; width:70%; align-content:center;">
                    <div class="input-group-prepend">
                        <span class="input-group-text my-input-text" id="myName"><object name="userName">너의 이름은?</object></span>

                    </div>

                    <input type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                </div>
                <div class="row">
                    <div class="input-group my-input" style="margin-top:5rem; margin-bottom:3rem; width:90%;">
                        <div class="input-group-prepend">
                            <span class="input-group-text my-input-text" id="photoAddon01"><object name="myPhoto">내 사진</object></span>
                        </div>
                        <div class="custom-file">
                            <input type="file" class="custom-file-input" id="photoFile01" aria-describedby="inputGroupFileAddon01">
                            <label class="custom-file-label " for="inputGroupFile01">파일 선택..</label>
                        </div>
                    </div>
                    <div class="image-container">
                        <img src="" id="image-preview" />
                    </div>
                    <label>This is the localstorage output:</label><br />
                    <div class="localstorage-output"></div>
                    <br />
                    <br />

                    <label>This is the Canvas:</label><br />
                    <canvas id="canvas-element"></canvas>
                </div>
                
            </div>
            <div class="row">
                <a href="http://42af1b8be794.ngrok.io/question.html" class="btn next btn-lg active col-md" role="button" aria-pressed="true" style="margin-bottom:20px; color: white;" onclick="store()">시작하기</a>

            </div>
            <script type="text/javascript">
                funtion store(){
                    var inputClassCode = document.getElementById("classCode");
                    var inputName = document.getElementById("myName");
                    

                    localStorage.setItem("classCode", inputClassCode.value);
                    localStorage.setItem("myName", inputName.value);

                    imgCanvas.width = (img.width / 4);
                    imgCanvas.height = (img.height / 4);

                    
                    function storeTheImage() {
                        var imgCanvas = document.getElementById('canvas-element'),
                            imgContext = imgCanvas.getContext("2d");

                        var img = document.getElementById('image-preview');
                        // Make sure canvas is as big as the picture BUT make it half size to the file size is small enough
                        imgCanvas.width = (img.width / 4);
                        imgCanvas.height = (img.height / 4);

                        // Draw image into canvas element
                        imgContext.drawImage(img, 0, 0, (img.width / 4), (img.height / 4));

                        // Get canvas contents as a data URL
                        var imgAsDataURL = imgCanvas.toDataURL("image/png");

                        // Save image into localStorage
                        try {
                            window.localStorage.setItem("imageStore", imgAsDataURL);
                            $('.localstorage-output').html(window.localStorage.getItem('imageStore'));
                        }
                        catch (e) {
                            console.log("Storage failed: " + e);
                        }
                    }

                    function readURL(input) {
                        if (input.files && input.files[0]) {
                            var reader = new FileReader();

                            reader.onload = function (e) {
                                $('#image-preview').attr('src', e.target.result);
                                storeTheImage();
                            }
                            reader.readAsDataURL(input.files[0]);
                        }
                    }

                    $('.file-input').on('change', function () {
                        readURL(this);
                    });
                
            </script>
        </div>
</div>


        </div>
        <div class='footer container'>
            <div class="container">
                주식회사 이웅기 대표 (비영리 단체)
                <span><a href="tel:010-1234-1234" target="_blank">010-1234-1234</a></span>
            </div>
            <div class="container">
                <span><a href="mailto:" target="_blank"></a></span>
                <br>
                <span> © 2020 이웅기. All rights reserved. </span>
            </div>
        </div>
    </div>


</body>
</html>
